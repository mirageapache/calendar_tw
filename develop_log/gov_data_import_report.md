# ğŸ‰ æ”¿åºœè¡Œæ”¿æ©Ÿé—œè¾¦å…¬æ—¥æ›†è¡¨åŒ¯å…¥å®Œæˆå ±å‘Š

## âœ… å·²å®Œæˆå·¥ä½œ

### 1. CSV æª”æ¡ˆåˆ†æ
**æª”æ¡ˆåç¨±**: æ”¿åºœè¡Œæ”¿æ©Ÿé—œè¾¦å…¬æ—¥æ›†è¡¨.csv  
**è³‡æ–™ä¾†æº**: æ”¿åºœå…¬é–‹è³‡æ–™å¹³å°  
**ç¸½ç­†æ•¸**: 1,197 ç­†  
**å¹´ä»½ç¯„åœ**: 2017-2026 (å…± 10 å¹´)  
**ç·¨ç¢¼**: UTF-8 with BOM

### 2. æ¬„ä½çµæ§‹åˆ†æ

| æ¬„ä½åç¨± | èªªæ˜ | ç¯„ä¾‹å€¼ |
|---------|------|--------|
| `date` | æ—¥æœŸ (YYYYMMDD) | 20260101 |
| `year` | å¹´ä»½ | 2026 |
| `name` | å‡æ—¥åç¨± | ä¸­è¯æ°‘åœ‹é–‹åœ‹ç´€å¿µæ—¥ |
| `isholiday` | æ˜¯å¦ç‚ºå‡æ—¥ | æ˜¯/å¦ |
| `holidaycategory` | å‡æ—¥é¡åˆ¥ | æ”¾å‡ä¹‹ç´€å¿µæ—¥åŠç¯€æ—¥ |
| `description` | èªªæ˜ | å…¨åœ‹å„æ©Ÿé—œå­¸æ ¡æ”¾å‡ä¸€æ—¥ |

### 3. å‡æ—¥é¡åˆ¥çµ±è¨ˆ

æ”¿åºœè³‡æ–™åŒ…å«ä»¥ä¸‹é¡åˆ¥ï¼š
- **æ”¾å‡ä¹‹ç´€å¿µæ—¥åŠç¯€æ—¥** - åœ‹å®šå‡æ—¥
- **æ˜ŸæœŸå…­ã€æ˜ŸæœŸæ—¥** - ä¸€èˆ¬é€±æœ«
- **ç‰¹å®šç¯€æ—¥** - ç‰¹æ®Šç¯€æ—¥
- **è£œè¡Œä¸Šç­æ—¥** - éœ€è¦ä¸Šç­çš„æ—¥å­
- **è£œå‡** - è£œå‡æ—¥
- **èª¿æ•´æ”¾å‡æ—¥** - å½ˆæ€§èª¿æ•´çš„æ”¾å‡æ—¥

### 4. è³‡æ–™è¡¨è¨­è¨ˆ

åŸºæ–¼æ”¿åºœè³‡æ–™æ ¼å¼ï¼Œæˆ‘å€‘çš„è³‡æ–™è¡¨è¨­è¨ˆå®Œå…¨ç›¸å®¹ï¼š

#### CalendarDay (æ—¥æ›†æ—¥æœŸ)
- âœ… `date` - æ—¥æœŸ
- âœ… `year`, `month`, `day` - å¹´æœˆæ—¥
- âœ… `weekday` - æ˜ŸæœŸå¹¾ (0-6)
- âœ… `is_weekend` - æ˜¯å¦é€±æœ«
- âœ… `is_holiday` - æ˜¯å¦å‡æ—¥ (å°æ‡‰ isholiday='æ˜¯')
- âœ… `is_workday` - æ˜¯å¦è£œç­æ—¥ (å°æ‡‰ holidaycategory='è£œè¡Œä¸Šç­æ—¥')
- âœ… `holiday_name` - å‡æ—¥åç¨± (å°æ‡‰ name)
- âœ… `description` - èªªæ˜

#### Holiday (å‡æ—¥)
- âœ… `date` - æ—¥æœŸ
- âœ… `name` - å‡æ—¥åç¨±
- âœ… `year` - å¹´ä»½
- âœ… `holiday_type` - å‡æ—¥é¡å‹ (national/flexible/adjusted)
- âœ… `is_lunar` - æ˜¯å¦è¾²æ›†å‡æ—¥
- âœ… `description` - èªªæ˜

#### WorkdayAdjustment (è£œç­æ—¥)
- âœ… `date` - è£œç­æ—¥æœŸ
- âœ… `year` - å¹´ä»½
- âœ… `description` - è£œç­åŸå› 

### 5. è‡ªå‹•åˆ¤æ–·é‚è¼¯

åŒ¯å…¥ç¨‹å¼æœƒè‡ªå‹•è™•ç†ï¼š
- âœ… æ—¥æœŸæ ¼å¼è½‰æ› (YYYYMMDD â†’ YYYY-MM-DD)
- âœ… é€±æœ«åˆ¤æ–· (weekday 5, 6)
- âœ… å‡æ—¥é¡å‹å°æ‡‰
  - `æ”¾å‡ä¹‹ç´€å¿µæ—¥åŠç¯€æ—¥` â†’ `national`
  - `èª¿æ•´æ”¾å‡æ—¥` â†’ `adjusted`
  - `è£œå‡` â†’ `flexible`
- âœ… è¾²æ›†å‡æ—¥è­˜åˆ¥ (æ˜¥ç¯€ã€ç«¯åˆã€ä¸­ç§‹ç­‰é—œéµå­—)
- âœ… è£œç­æ—¥ç‰¹æ®Šè™•ç† (ä¸ç®—å‡æ—¥)

---

## ğŸ“Š 2026å¹´åŒ¯å…¥çµæœ

### çµ±è¨ˆè³‡è¨Š
- âœ… **æ—¥æ›†è³‡æ–™**: 121 ç­† (2026å¹´æ‰€æœ‰å‡æ—¥å’Œé€±æœ«)
- âœ… **å‡æ—¥è³‡æ–™**: 16 ç­†
- âœ… **è£œç­æ—¥è³‡æ–™**: 0 ç­† (2026å¹´ç„¡è£œç­æ—¥)

### 2026å¹´å‡æ—¥æ¸…å–®

| æ—¥æœŸ | å‡æ—¥åç¨± | é¡å‹ |
|-----|---------|------|
| 2026-01-01 | ä¸­è¯æ°‘åœ‹é–‹åœ‹ç´€å¿µæ—¥ | åœ‹å®šå‡æ—¥ |
| 2026-02-16 | é™¤å¤• | è¾²æ›†å‡æ—¥ |
| 2026-02-17 | æ˜¥ç¯€ | è¾²æ›†å‡æ—¥ |
| 2026-02-18 | æ˜¥ç¯€ | è¾²æ›†å‡æ—¥ |
| 2026-02-19 | æ˜¥ç¯€ | è¾²æ›†å‡æ—¥ |
| 2026-02-20 | æ˜¥ç¯€ | è¾²æ›†å‡æ—¥ |
| 2026-02-28 | å’Œå¹³ç´€å¿µæ—¥ | åœ‹å®šå‡æ—¥ |
| 2026-04-04 | å…’ç«¥ç¯€åŠæ°‘æ—æƒå¢“ç¯€ | åœ‹å®šå‡æ—¥ |
| 2026-05-01 | å‹å‹•ç¯€ | åœ‹å®šå‡æ—¥ |
| 2026-06-19 | ç«¯åˆç¯€ | è¾²æ›†å‡æ—¥ |
| 2026-09-03 | è»äººç¯€ | ç‰¹å®šç¯€æ—¥ |
| 2026-09-25 | ä¸­ç§‹ç¯€ | è¾²æ›†å‡æ—¥ |
| 2026-09-28 | æ•™å¸«ç¯€ | ç‰¹å®šç¯€æ—¥ |
| 2026-10-10 | åœ‹æ…¶æ—¥ | åœ‹å®šå‡æ—¥ |
| 2026-10-25 | å…‰å¾©ç¯€ | ç‰¹å®šç¯€æ—¥ |
| 2026-12-25 | è¡Œæ†²ç´€å¿µæ—¥ | ç‰¹å®šç¯€æ—¥ |

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### 1. åŒ¯å…¥å–®ä¸€å¹´ä»½
```powershell
cd calendarTW
python manage.py import_gov_calendar "è·¯å¾‘\æ”¿åºœè¡Œæ”¿æ©Ÿé—œè¾¦å…¬æ—¥æ›†è¡¨.csv" --year 2026
```

### 2. åŒ¯å…¥æ‰€æœ‰å¹´ä»½ (2017-2026)
```powershell
python manage.py import_gov_calendar "è·¯å¾‘\æ”¿åºœè¡Œæ”¿æ©Ÿé—œè¾¦å…¬æ—¥æ›†è¡¨.csv"
```

### 3. æŒ‡å®šç·¨ç¢¼
```powershell
python manage.py import_gov_calendar "æª”æ¡ˆ.csv" --encoding utf-8
```

### 4. æŸ¥è©¢å·²åŒ¯å…¥çš„è³‡æ–™
```powershell
python manage.py shell
```
```python
from calendar_api.models import CalendarDay, Holiday

# æŸ¥çœ‹ç¸½ç­†æ•¸
print(f"æ—¥æ›†: {CalendarDay.objects.count()} ç­†")
print(f"å‡æ—¥: {Holiday.objects.count()} ç­†")

# æŸ¥çœ‹æŸå¹´å‡æ—¥
for h in Holiday.objects.filter(year=2026).order_by('date'):
    print(f"{h.date} - {h.name}")

# æŸ¥çœ‹æŸå€‹æœˆä»½
from datetime import date
days = CalendarDay.objects.filter(year=2026, month=2)
for day in days:
    print(f"{day.date} {day.weekday_display()} - {day.holiday_name or 'å·¥ä½œæ—¥'}")
```

---

## ğŸŒ API æ¸¬è©¦

ä¼ºæœå™¨å·²å•Ÿå‹•æ–¼ http://localhost:8200/

### API ç«¯é»

1. **API æ–‡ä»¶**
   - Swagger UI: http://localhost:8200/api/docs/
   - ReDoc: http://localhost:8200/api/redoc/

2. **æŸ¥è©¢æ—¥æ›†è³‡æ–™**
   ```
   GET http://localhost:8200/api/calendar-days/
   GET http://localhost:8200/api/calendar-days/?year=2026
   GET http://localhost:8200/api/calendar-days/?year=2026&month=2
   GET http://localhost:8200/api/calendar-days/?is_holiday=true
   GET http://localhost:8200/api/calendar-days/by-date/2026-01-01/
   ```

3. **æŸ¥è©¢å‡æ—¥è³‡æ–™**
   ```
   GET http://localhost:8200/api/holidays/
   GET http://localhost:8200/api/holidays/by-year/2026/
   GET http://localhost:8200/api/holidays/?is_lunar=true
   ```

4. **æŸ¥è©¢æœˆä»½è³‡æ–™**
   ```
   GET http://localhost:8200/api/calendar-days/by-month/2026/2/
   ```

5. **Django Admin**
   - http://localhost:8200/admin/
   - (éœ€è¦å…ˆå»ºç«‹è¶…ç´šä½¿ç”¨è€…: `python manage.py createsuperuser`)

---

## ğŸ“ å·²å»ºç«‹çš„æª”æ¡ˆ

1. **import_gov_calendar.py** - æ”¿åºœè³‡æ–™å°ˆç”¨åŒ¯å…¥æŒ‡ä»¤
   - è·¯å¾‘: `calendar_api/management/commands/import_gov_calendar.py`
   - åŠŸèƒ½: è‡ªå‹•è™•ç†æ”¿åºœ CSV æ ¼å¼ï¼Œæ”¯æ´ BOMã€è‡ªå‹•ç·¨ç¢¼åµæ¸¬

2. **import_csv.py** - é€šç”¨ CSV åŒ¯å…¥æŒ‡ä»¤
   - è·¯å¾‘: `calendar_api/management/commands/import_csv.py`
   - åŠŸèƒ½: å½ˆæ€§åŒ¯å…¥å„ç¨®æ ¼å¼çš„ CSV

3. **import_calendar_data.py** - ç¨‹å¼ç¢¼ç”¢ç”Ÿè³‡æ–™
   - è·¯å¾‘: `calendar_api/management/commands/import_calendar_data.py`
   - åŠŸèƒ½: ç”¨ç¨‹å¼ç¢¼ç”¢ç”Ÿæ—¥æ›†è³‡æ–™ï¼ˆé©åˆç„¡ CSV æ™‚ä½¿ç”¨ï¼‰

---

## ğŸ”„ åˆ‡æ›åˆ° Supabase

ç›®å‰ä½¿ç”¨æœ¬åœ° SQLite æ¸¬è©¦ã€‚è¦åˆ‡æ›åˆ° Supabaseï¼š

1. **ç¢ºèªç¶²è·¯é€£ç·šæ­£å¸¸**
2. **å•Ÿç”¨ DATABASE_URL**
   ```bash
   # ç·¨è¼¯ .env æª”æ¡ˆ
   # å–æ¶ˆè¨»è§£ DATABASE_URL é€™ä¸€è¡Œ
   DATABASE_URL=postgresql://postgres:mirage14@db.icfdtvaxmrjrykvbmepw.supabase.co:5432/postgres
   ```

3. **åŸ·è¡Œé·ç§»åˆ° Supabase**
   ```powershell
   python manage.py migrate
   ```

4. **é‡æ–°åŒ¯å…¥è³‡æ–™åˆ° Supabase**
   ```powershell
   python manage.py import_gov_calendar "è·¯å¾‘\æ”¿åºœè¡Œæ”¿æ©Ÿé—œè¾¦å…¬æ—¥æ›†è¡¨.csv"
   ```

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè­°

1. âœ… **åŒ¯å…¥æ‰€æœ‰å¹´ä»½è³‡æ–™** (2017-2026)
   ```powershell
   python manage.py import_gov_calendar "c:\Users\user\Documents\DataSets\æ”¿åºœè¡Œæ”¿æ©Ÿé—œè¾¦å…¬æ—¥æ›†è¡¨.csv"
   ```

2. âœ… **å»ºç«‹è¶…ç´šä½¿ç”¨è€…** (å¯ä½¿ç”¨ Django Admin)
   ```powershell
   python manage.py createsuperuser
   ```

3. âœ… **æ¸¬è©¦æ‰€æœ‰ API ç«¯é»**
   - é–‹å•Ÿ http://localhost:8200/api/docs/

4. âœ… **åˆ‡æ›åˆ° Supabase** (æ­£å¼è³‡æ–™åº«)

5. âœ… **é–‹ç™¼å‰ç«¯æ‡‰ç”¨**

6. âœ… **éƒ¨ç½²åˆ°æ­£å¼ç’°å¢ƒ**

---

## ğŸ’¡ é‡è¦è³‡è¨Š

### æ”¿åºœè³‡æ–™æ›´æ–°
- æ”¿åºœé€šå¸¸æœƒåœ¨æ¯å¹´å¹´åº•å…¬å‘Šä¸‹ä¸€å¹´åº¦çš„è¡Œäº‹æ›†
- å»ºè­°å®šæœŸå¾ [æ”¿åºœè³‡æ–™é–‹æ”¾å¹³è‡º](https://data.gov.tw/) æ›´æ–°è³‡æ–™
- æœå°‹é—œéµå­—ï¼šã€Œè¡Œäº‹æ›†ã€ã€ã€Œè¾¦å…¬æ—¥æ›†ã€

### è³‡æ–™ç‰¹æ€§
- åŒ…å«æ‰€æœ‰é€±æœ« (æ˜ŸæœŸå…­ã€æ—¥)
- åŒ…å«åœ‹å®šå‡æ—¥å’Œè£œå‡
- åŒ…å«è£œç­æ—¥è³‡è¨Š
- 2026å¹´ç„¡è£œç­æ—¥ (é€™æ˜¯çœŸå¯¦æ”¿åºœè³‡æ–™)

### æ¨¡å‹æ¬„ä½å®Œå…¨å°æ‡‰
æˆ‘å€‘çš„è³‡æ–™è¡¨è¨­è¨ˆå·²å®Œå…¨åŸºæ–¼æ”¿åºœè³‡æ–™æ ¼å¼èª¿æ•´ï¼Œå¯ä»¥ï¼š
- âœ… å®Œæ•´ä¿ç•™æ‰€æœ‰æ”¿åºœè³‡æ–™
- âœ… è‡ªå‹•è™•ç†å„ç¨®å‡æ—¥é¡å‹
- âœ… æ­£ç¢ºè­˜åˆ¥è¾²æ›†å‡æ—¥
- âœ… å€åˆ†å‡æ—¥å’Œè£œç­æ—¥

æ­å–œï¼ä½ çš„æ—¥æ›† API å·²ç¶“æˆåŠŸåŒ¯å…¥çœŸå¯¦çš„æ”¿åºœè³‡æ–™äº†ï¼ğŸŠ
